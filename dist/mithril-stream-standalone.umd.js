!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";!function(){t.SKIP={},t.lift=function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);return r(t).map((function(t){return n.apply(void 0,t)}))},t.scan=function(n,e,r){var i=r.map((function(r){var i=n(e,r);return i!==t.SKIP&&(e=i),i}));return i(e),i},t.merge=r,t.combine=e,t.scanMerge=function(n,t){var r=n.map((function(n){return n[0]})),i=e((function(){var e=arguments[arguments.length-1];return r.forEach((function(r,i){e.indexOf(r)>-1&&(t=n[i][1](t,r()))})),t}),r);return i(t),i},t["fantasy-land/of"]=t;var n=!1;function t(n){var r,a=[],u=[];function o(e){return arguments.length&&e!==t.SKIP&&(n=e,i(o)&&(o._changing(),o._state="active",a.slice().forEach((function(t,e){i(t)&&t(this[e](n))}),u.slice()))),n}function c(){return(r=t()).map((function(n){return!0===n&&(o._parents.forEach((function(n){n._unregisterChild(o)})),o._state="ended",o._parents.length=a.length=u.length=0),n})),r}return o.constructor=t,o._state=arguments.length&&n!==t.SKIP?"active":"pending",o._parents=[],o._changing=function(){i(o)&&(o._state="changing"),a.forEach((function(n){n._changing()}))},o._map=function(e,r){var i=r?t():t(e(n));return i._parents.push(o),a.push(i),u.push(e),i},o.map=function(n){return o._map(n,"active"!==o._state)},o.toJSON=function(){return null!=n&&"function"==typeof n.toJSON?n.toJSON():n},o["fantasy-land/map"]=o.map,o["fantasy-land/ap"]=function(n){return e((function(n,t){return n()(t())}),[n,o])},o._unregisterChild=function(n){var t=a.indexOf(n);-1!==t&&(a.splice(t,1),u.splice(t,1))},Object.defineProperty(o,"end",{get:function(){return r||c()}}),o}function e(n,e){var r=e.every((function(n){if(n.constructor!==t)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream.");return"active"===n._state})),i=r?t(n.apply(null,e.concat([e]))):t(),a=[],u=e.map((function(t){return t._map((function(u){return a.push(t),(r||e.every((function(n){return"pending"!==n._state})))&&(r=!0,i(n.apply(null,e.concat([a]))),a=[]),u}),!0)})),o=i.end.map((function(n){!0===n&&(u.forEach((function(n){n.end(!0)})),o.end(!0))}));return i}function r(n){return e((function(){return n.map((function(n){return n()}))}),n)}function i(n){return"pending"===n._state||"active"===n._state||"changing"===n._state}Object.defineProperty(t,"HALT",{get:function(){return n||console.log("HALT is deprecated and has been renamed to SKIP"),n=!0,t.SKIP}}),"undefined"!=typeof module?module.exports=t:"function"!=typeof window.m||"stream"in window.m?window.m={stream:t}:window.m.stream=t}()}));
//# sourceMappingURL=mithril-stream-standalone.umd.js.map
